# .gitignore æ¸…ç†æ€»ç»“

## âœ… æ¸…ç†å®Œæˆ

**æ‰§è¡Œæ—¶é—´**ï¼š2024-12-18  
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ

---

## ğŸ“‹ æ‰§è¡Œçš„æ“ä½œ

### 1. æ›´æ–° .gitignore è§„åˆ™

#### âœ… å…è®¸ package-lock.json è¢«æäº¤

**ä¿®æ”¹å‰**ï¼š
```gitignore
package-lock.json  # å¿½ç•¥æ‰€æœ‰package-lock.json
```

**ä¿®æ”¹å**ï¼š
```gitignore
# package-lock.json åº”è¯¥è¢«æäº¤ä»¥ç¡®ä¿ä¾èµ–ç‰ˆæœ¬ä¸€è‡´æ€§ï¼ˆDockeræ„å»ºéœ€è¦ï¼‰
# ï¼ˆç§»é™¤æ­¤è§„åˆ™ï¼‰
```

**ç†ç”±**ï¼š
- `package-lock.json` åº”è¯¥è¢«æäº¤ä»¥ç¡®ä¿ä¾èµ–ç‰ˆæœ¬ä¸€è‡´æ€§
- Dockeræ„å»ºéœ€è¦ `npm ci` å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¾èµ– `package-lock.json`
- ç¡®ä¿æ‰€æœ‰ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä½¿ç”¨ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬

#### âœ… å®Œå–„æ•°æ®åº“æ–‡ä»¶å¿½ç•¥è§„åˆ™

**ä¿®æ”¹å‰**ï¼š
```gitignore
*.db
backend/database/*.db
```

**ä¿®æ”¹å**ï¼š
```gitignore
*.db
*.sqlite
*.sqlite3
# è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æ•°æ®åº“è·¯å¾„
backend/database/*.db
backend/src/database/*.db
data/database/*.db
data/test/database/*.db
# ... ç­‰ç­‰
```

**ç†ç”±**ï¼š
- è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æ•°æ®åº“æ–‡ä»¶è·¯å¾„
- ç¡®ä¿æ— è®ºæ•°æ®åº“æ–‡ä»¶æ”¾åœ¨å“ªé‡Œéƒ½ä¸ä¼šè¢«æäº¤

### 2. ä»Gitä¸­åˆ é™¤æ•°æ®åº“æ–‡ä»¶

**æ“ä½œ**ï¼š
```bash
git rm --cached backend/src/database/mms.db
```

**ç»“æœ**ï¼š
- âœ… ä»Gitç´¢å¼•ä¸­åˆ é™¤
- âœ… ä¿ç•™æœ¬åœ°æ–‡ä»¶ï¼ˆä¸è¢«åˆ é™¤ï¼‰
- âœ… æœªæ¥æ­¤æ–‡ä»¶å°†è¢«å¿½ç•¥

---

## ğŸ“Š æ¸…ç†å‰åå¯¹æ¯”

| æ–‡ä»¶/è§„åˆ™ | æ¸…ç†å‰ | æ¸…ç†å |
|----------|--------|--------|
| `package-lock.json` | âŒ è¢«å¿½ç•¥ | âœ… å…è®¸æäº¤ |
| `backend/src/database/mms.db` | âŒ å·²æäº¤ | âœ… å·²ä»Gitåˆ é™¤ï¼ˆæœ¬åœ°ä¿ç•™ï¼‰ |
| æ•°æ®åº“æ–‡ä»¶å¿½ç•¥è§„åˆ™ | âš ï¸ ä¸å®Œæ•´ | âœ… å®Œå–„ |

---

## âœ… éªŒè¯ç»“æœ

### å½“å‰GitçŠ¶æ€

```bash
# package-lock.json åº”è¯¥è¢«æäº¤
git ls-files | grep package-lock.json
# è¾“å‡ºï¼šbackend/package-lock.json, frontend/package-lock.json âœ…

# æ•°æ®åº“æ–‡ä»¶åº”è¯¥è¢«å¿½ç•¥
git check-ignore backend/src/database/mms.db
# è¾“å‡ºï¼šåŒ¹é….gitignoreè§„åˆ™ âœ…

# æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–ä¸åº”æäº¤çš„æ–‡ä»¶
git status
# åº”è¯¥åªæ˜¾ç¤ºæ­£å¸¸çš„æ›´æ”¹ âœ…
```

---

## ğŸ“ æœ€ä½³å®è·µè¯´æ˜

### package-lock.json æ˜¯å¦åº”è¯¥æäº¤ï¼Ÿ

**æœ¬é¡¹ç›®é€‰æ‹©ï¼šâœ… æäº¤**

**ç†ç”±**ï¼š
1. **ä¾èµ–ç‰ˆæœ¬ä¸€è‡´æ€§**ï¼šç¡®ä¿æ‰€æœ‰ç¯å¢ƒä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–
2. **Dockeræ„å»ºéœ€è¦**ï¼š`npm ci` å‘½ä»¤éœ€è¦ `package-lock.json`
3. **å¯é‡å¤æ„å»º**ï¼šç¡®ä¿æ„å»ºç»“æœå¯é‡å¤
4. **é¿å…"åœ¨æˆ‘æœºå™¨ä¸Šå¯ä»¥è¿è¡Œ"é—®é¢˜**

**æ³¨æ„äº‹é¡¹**ï¼š
- å½“ä¾èµ–æ›´æ–°æ—¶ï¼Œéœ€è¦æ›´æ–°å¹¶æäº¤ `package-lock.json`
- å¦‚æœå›¢é˜Ÿä½¿ç”¨ä¸åŒçš„åŒ…ç®¡ç†å™¨ï¼ˆyarn/pnpmï¼‰ï¼Œéœ€è¦ç›¸åº”è°ƒæ•´ç­–ç•¥

---

## ğŸ¯ åç»­å»ºè®®

### å®šæœŸæ£€æŸ¥

å»ºè®®å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦æœ‰ä¸åº”æäº¤çš„æ–‡ä»¶ï¼š

```bash
# æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®åº“æ–‡ä»¶è¢«æäº¤
git ls-files | grep "\.db$\|\.sqlite"

# æ£€æŸ¥æ˜¯å¦æœ‰æ—¥å¿—æ–‡ä»¶è¢«æäº¤
git ls-files | grep "\.log$"

# æ£€æŸ¥æ˜¯å¦æœ‰node_modulesè¢«æäº¤
git ls-files | grep "node_modules"

# æ£€æŸ¥æ˜¯å¦æœ‰coverageæŠ¥å‘Šè¢«æäº¤
git ls-files | grep "coverage"
```

### å¦‚æœå‘ç°æ–°é—®é¢˜

å¦‚æœå‘ç°æ–°çš„ä¸åº”è¯¥æäº¤çš„æ–‡ä»¶ï¼š

```bash
# 1. ä»Gitä¸­åˆ é™¤ï¼ˆä¿ç•™æœ¬åœ°ï¼‰
git rm --cached <æ–‡ä»¶è·¯å¾„>

# 2. æ›´æ–°.gitignoreæ·»åŠ è§„åˆ™

# 3. æäº¤æ›´æ”¹
git add .gitignore
git commit -m "chore: ä»Gitä¸­åˆ é™¤ä¸åº”æäº¤çš„æ–‡ä»¶"
```

---

**æ¸…ç†å®Œæˆï¼ç°åœ¨.gitignoreé…ç½®æ›´åŠ åˆç†å’Œå®Œæ•´ã€‚**

